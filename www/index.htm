<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Web Explorer for OpenStack Command Line (CLI) Clients">
    <meta name="author" content="Ronald Bradford">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <title>OpenStack CLI Explorer</title>

    <!-- CDN
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    -->
    <link href="m/c/bootstrap.min.css" rel="stylesheet">
    <link href="m/c/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="m/c/styles.css"  rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"> <!-- Navigation -->
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.htm">CLI Explorer</a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li role="presentation"> <a class="notloggedin explorer">Explorer</a> </li>
          <li class="dropdown">
            <a href="#tools" class="dropdown-toggle" data-toggle="dropdown">CLI Tools <b class="caret"></b></a>
            <ul class="dropdown-menu">
               <li role="presentation"> <a href="#">OpenStackClient</a> </li>
               <li role="presentation" class="disabled"> <a href="#">Nova Client</a> </li>
               <li role="presentation" class="disabled"> <a href="#">Keystone Client</a> </li>
               <li role="presentation" class="disabled"> <a href="#">Glance Client</a> </li>
             </ul>
          </li>
          <li role="presentation"> <a data-toggle="modal" data-target="#help_page" href="#">Help</a> </li>
        </ul>
      </div> <!-- /.navbar-collapse -->
    </div> <!-- /.container -->
  </nav>

  <div class="modal fade bs-example-modal-lg" id="help_page" tabindex="-1" role="dialog" aria-labelledby="helpLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="helpLabel">OpenStack CLI Explorer Help</h4>
        </div>
        <div class="modal-body">
          <p>
            This tool is designed to assist users in becoming familiar with the various Command Line Interface (CLI) tools that exist with OpenStack. These tools include:
            <ul>
              <li>OpenStackClient (OSC), aka <code>openstack</code></li>
              <li>Nova compute client, aka <code>nova</code></li>
              <li>Glance image client, aka <code>glance</code></li>
              <li>Keystone identity client, aka <code>keystone</code></li>
            </ul>
          </p>
          <h2>OpenStackClient</h2>
          <p>
          The <b>CLI Explorer</b> for the <b>OpenStackClient</b> helps the end user with the scope of syntax options by breaking these into several arbitary categories. These categories are used simply to help in education.  They also are organized in respect to the general order of arguments. Arguments are broken down into these categories.:
          <ul>
            <li>Authentication</li>
            <li>Logging</li>
            <li>Arguments</li>
            <li>Output Format</li>
            <li>Options</li>
          </ul>
           </p>
          <pre>
$ openstack [ --os-username=&lt;user> ...] [ -q | -v | ...] [help] image list [ -f json ...   ] 
            [ Authentication          ] [ Logging      ] [               ] [ Output Format ] [Options]</pre>
          <p>
          </p>
          <h3>Authentication</h3>
          <p>
            The <button class="btn">Authentication</button> view enables you to define the authentication needed for your <b>openstack</b> command.  
            To assist in learning the wealth of authentication options, these are further broken down into Beginner and Expert options.
          </p>
          <p>The <b>Authentication</b> options also enable you to test the Public Identity URL, and the username,password and project values to ensure these are valid.</p>
          </p>
          <h3>Logging</h3>
          <p>The <button class="btn">Logging</button> view enables you to define the verbosity of the output that is generated for the <b>openstack</b> command.
          </p>
          <h3>Arguments</h3>
          <p>
          This is the required <b>command</b> and <b>option</b> arguments used with <b>openstack</b>. It is possible with the use of system environment variables for authentication to require no other arguments to produce output.  This section also includes the optional <b>help</b> prefix that provides detailed help information including the various detailed options that can be used.
          </p>
          <h3>Output Format</h3>
          <p>The <button class="btn">Output Format</button> view enables you to specify various formatting options that the <b>openstack</b> client can return.</p>
          <h3>Options</h3>
          <p>Finally, it is possible to specify addition options that are applicable to the specific <b>command</b> and <b>action</b> you have requested.</p>

          <h2>Messages</h2>
          <p>When running a constructed command you may receive the following messages. </p>
          <div class="alert alert-success">Successfully ran command.</div>
          <p>This message indicate you have run a command and that the Output (stdout) and Errors (stderr) will be present.</p>
          <div class="alert alert-warning">You need to specify a command.You need to specify an action.</div>
          <p>In order to use <button class="btn btn-success">Run</button> you need to specify <select><option>Command</option></select> and <select><option>Action</option></select> values.</p>
          <div class="alert alert-danger">Error executing the command with web API.</div>
          <p>This message is because the Flask api.py web container that processes the request when you click <b>Run</b> is not running.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <section id="authentication_page" style="display:none">
    <div class="container-fluid">
      <fieldset>
        <legend>Authentication</legend>
        <form class="form-inline" method="POST">
          <div class="row" style="margin-top:40px">
          <div class="col-md-12">
          <div class="form-group">
            <label for="os-auth-url">Identity Public URL</label>
            <input name="os-auth-url" class="form-control" value="http://localhost:5000/v2.0/" style="width:250px"></input>
          </div> <!-- form-group -->
          <div class="form-group">
            <button class="btn btn-primary test">Test URL</button>
          </div> <!-- form-group -->
          </div> <!-- col -->
          </div> <!-- row -->

          <div class="row" style="margin-top:40px">
          <div class="col-md-12">
          <div class="form-group">
            <label for="os-username">Username</label>
            <input name="os-username" class="form-control" value="admin"></input>
          </div> <!-- form-group -->
          <div class="form-group">
            <label for="os-password">Password</label>
            <input name="os-password" class="form-control" value="passwd"></input>
          </div> <!-- form-group -->
          <div class="form-group">
            <label for="os-project-name">Project Name</label>
            <input name="os-project-name" class="form-control" value="admin"></input>
          </div> <!-- form-group -->
          <div class="form-group">
            <button class="btn btn-primary test">Test Values</button>
            <button class="btn btn-success save">Save</button>
            <button class="btn btn-warning cancel" style="float:right">Cancel</button>
          </div> <!-- form-group -->
          </div> <!-- col -->
          </div> <!-- row -->
        </form>
      </fieldset>
      <fieldset id="authentication_console" style="display:none">
        <legend>Console</legend>
        <h3>Command</h3>
        <pre class="execute"></pre>
        <h3>Output</h3>
<div class="alert alert-warning">This is mock output</div>
        <pre class="console">
{
    "version": {
        "id": "v2.0",
        "links": [
            {
                "href": "http://localhost:5000/v2.0/",
                "rel": "self"
            },
            {
                "href": "http://docs.openstack.org/",
                "rel": "describedby",
                "type": "text/html"
            }
        ],
        "media-types": [
            {
                "base": "application/json",
                "type": "application/vnd.openstack.identity-v2.0+json"
            }
        ],
        "status": "stable",
        "updated": "2014-04-17T00:00:00Z"
    }
}
        </pre>

<!--
<h3>Command</h3>
<div class="alert alert-danger">This is mock output</div>
        <pre>
$ curl -sL -H "Content-Type: application/json" -X POST -d '{ "auth": { "tenantName": "<b>admin</b>", "passwordCredentials": { "username": "<b>admin</b>", "password": "<b>passwd/</b>" } } }' <b>http://localhost:5000/v2.0/</b>tokens | python -m json.tool </pre>
-->
      </fieldset>
    </div> <!-- container -->
  </section> <!-- login_page -->

  <section id="logging_page" style="display:none">
    <div class="container-fluid">
      <fieldset>
        <legend>Logging</legend>
        <form class="form-inline" method="POST">
          <div class="form-group">
            <select name="logging" class="form-control">
              <option value="">Default</option>
              <option value="-q">Quiet (-q)</option>
              <option value="-v">Verbose (-v)</option>
              <option value="--debug">Debug (--debug)</option>
              <option value="--timing">Timing (--timing)</option>
              <option value="--log-file">Log File (--log-file)</option>
            </select>
          </div> <!-- form-group -->
          <div class="form-group">
            <button class="btn btn-success save">Save</button>
            <button class="btn btn-warning cancel" style="float:right">Cancel</button>
          </div> <!-- form-group -->
        </form>
      </fieldset>
     </div> <!-- container -->
  </section> <!-- logging_page -->

  <section id="format_page" style="display:none">
    <div class="container-fluid">
      <fieldset>
        <legend>Output Format</legend>
        <form class="form-inline" method="POST">
          <div class="form-group">
            <label for="long">Long Format</label>
            <input name="long" type="checkbox" class="form-control" value="--long"></input>
          </div>
          <div class="form-group">
            <label for="format">Display Format</label>
            <select name="format" class="form-control">
              <option value="-f table"">Table (Default)</option>
              <option value="-f csv">CSV (-f csv)</option>
              <option value="-f json">JSON (-f json)</option>
              <option value="-f html">HTML (-f html)</option>
              <option value="-f yaml">YAML (-f yaml)</option>
              <option value="-f shell">Shell (-f shell)</option>
            </select>
          </div> <!-- form-group -->
          <div class="form-group">
            <label for="prefix">Shell Prefix</label>
            <input name="prefix" class="form-control" value=""></input>
          </div> <!-- form-group -->
          <div class="form-group">
            <button class="btn btn-success save">Save</button>
            <button class="btn btn-warning cancel" style="float:right">Cancel</button>
          </div> <!-- col -->
        </form>
      </fieldset>
    </div> <!-- container -->
  </section> <!-- format_page -->

  <section id="explorer_page" style="display:none">
    <div class="container-fluid">
      <fieldset>
        <legend>OpenStackClient</legend>
        <form class="form-inline" method="POST">
          <h1>Command Line Options</h1>
          <div class="row" style="margin-top:40px">
            <div class="col-md-12">
              <div id="msg" class="alert alert-dismissible" role="alert" style="display:none">
              <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <span id="msg-text"></span>
              </div> <! -- #msg -->
            </div> <!-- col -->
            <div class="col-md-12">
              <button class="btn authentication">Authentication</button>
              <button class="btn logging">Logging</button>
              <div class="form-group">
                <label for="help">Help</label>
                <input name="help" type="checkbox" class="form-control" value="help"></input>
              </div>
              <div class="form-group">
                <label for="command"></label>
                <select name="command" class="form-control">
                <option value="">Command</option>
                <optgroup label="Compute">
                  <option>server</option>
                  <option>image</option>
                  <option>ip fixed</option>
                  <option>ip floating</option>
                </optgroup>
                <optgroup label="Storage">
                  <option>volume</option>
                  <option>snapshot</option>
                  <option>object</option>
                </optgroup>
                <optgroup label="Identity">
                  <option>user</option>
                  <option>role</option>
                  <option>keypair</option>
                  <option>security group</option>
                  <option>project</option>
                </optgroup>
                </select>
              </div> <!-- form-group -->
    
              <div class="form-group">
                <label for="action"></label>
                <select name="action" class="form-control">
                  <option value="">Action</option>
                  <option>list</option>
                  <option>show</option>
                  <option>create</option>
                  <option>delete</option>
                  <option>set</option>
                  <option>...</option>
                </select>
              </div> <!-- form-group -->
            <button class="btn format">Output Format</button>
            <div class="form-group">
              <label for="options">options</label>
              <input name="options" class="form-control" value=""></input>
            </div> <!-- form-group -->
            <button class="btn btn-success run">Run</button>
            <button class="btn btn-warning clear" style="float:right">Clear</button>
          </div> <!-- col -->
        </div> <!-- row -->
      </fieldset>

      <fieldset id="explorer_console" style="display:none">
        <legend>Console</legend>
        <h3>Command</h3>
        <pre id="execute"></pre>
        <div id="explorer_response" style="display:none">
          <h3>Return code ($?)</h3>
          <pre id="rc"></pre>
          <h3>Output (stdout)</h3> <!--  <small><button class="btn btn-warning">Download</button> -->
          <pre id="stdout"></pre>
          <h3>Errors (stderr)</h3>
          <pre id="stderr"></pre>
        </div>
      </fieldset>
    </div> <!-- container -->
  </section>

  <section>
    <div class="container">
      <div class="alert alert-info alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <div style="float:right; margin:5px;"><img src="data:image/png;base64,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" /></div>
        <p><b>CLI Explorer</b> runs with any OpenStack cloud including <a href="http://docs.openstack.org/developer/devstack/">devstack</a>.</p>
        <p>All you need is the necessary credentials used to access your Horizon Dashboard and your Identity API Endpoint which you can find under the <b>Access & Security</b> menu option and <b>API Access</b> tab.</p>
        <p>Try <a href="http://opentstack.org">OpenStack</a> free for 12 months with <a target="_blank" href="https://express.mirantis.com">Mirantis Express</a>. You can then use <b>CLI Explorer</b> to learn the commands to manage your cloud.</p>
        <p></p>
      </div> <!-- alert -->
    </div> <!-- container -->
  </section>

  <footer>
    <div class="container">
      <div class="row text-center">
        <ul class="list-inline">
          <li><a target="_blank" href="https://github.com/ronaldbradford/cli_explorer">View this code</a></li>
          <li><a target="_blank" href="http://docs.openstack.org/developer/python-openstackclient/">OpenStackClient (OSC) Docs</a></li>
        </ul>
      </div> <!-- row -->
      <div class="row text-center copyright">
         <a target="_blank" href="http://cli_explorer.ronaldbradford.com">CLI Explorer</a> is developed by <a href="http://ronaldbradford.com/">Ronald Bradford</a>. 
         Created in 2015.
      </div> <!-- row -->
    </div> <!-- container -->
  </footer>
</body>

<!-- CDN
<script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.validation/1.13.1/jquery.validate.min.js"></script>
-->
<script type="text/javascript" src="m/j/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="m/j/bootstrap.min.js"></script>
<script type="text/javascript">

// General Functions
function debugging(o) {
  console.log(JSON.stringify(o));
}

function show_explorer_page(el) {
  $(el).closest('section').hide();
  $('#explorer_page').show();
  //console.log(JSON.stringify(os));
  return false;
}

var os = new Object();

// Navigation/Display Sections
$('.authentication').click(function() {
  console.log('.authentication');
  $('#explorer_page').hide();
  $('#authentication_page').show();
  return false;
});

$('.logging').click(function() {
  console.log('.authentication');
  $('#explorer_page').hide();
  $('#logging_page').show();
  return false;
});

$('.format').click(function() {
  console.log('.format');
  $('#explorer_page').hide();
  $('#format_page').show();
  return false;
});

$('.clear').click(function() {
  console.log('.clear');
  $('#msg').text('').hide();
  $('#rc').text('');
  $('#stdout').text('');
  $('#stderr').text('');
  $('#explorer_console').hide();
  $('#explorer_page input[name=help]').prop('checked', false);
  $('#explorer_page select[name=command]').val('');
  $('#explorer_page select[name=action]').val('');
  $('#explorer_page input[name=options]').val('');
  return false;
});

$('.explorer').click(function() {
  console.log('.explorer');
  $('#explorer_page').show();
  $('#authentication_page').hide();
  return false;
});

// Form Button Management
$('#authentication_page .save').click(function() {
  console.log('#authentication_page.save');
  
  authentication = new Object();
  authentication['os-username'] = $('#authentication_page input[name=os-username]').val();
  authentication['os-password'] = $('#authentication_page input[name=os-password]').val();
  authentication['os-project-name'] = $('#authentication_page input[name=os-project-name]').val();
  authentication['os-auth-url'] = $('#authentication_page input[name=os-auth-url]').val();
  os['authentication'] = authentication;

  debugging(os);
  show_explorer_page($(this));
  return false;
});

$('#authentication_page .test').click(function() {
  console.log('#authentication_page.test');
  $('#authentication_console').show();
  option = $(this).text();
  
  url = $('#authentication_page input[name=os-auth-url]').val();
  //TODO IF url does not have trailing / add it
  username = $('#authentication_page input[name=os-username]').val();
  password = $('#authentication_page input[name=os-password]').val();
  project_name = $('#authentication_page input[name=os-project-name]').val();

  if (option == 'Test URL') {
    execute = 'curl -sL ' + url + ' | python -m json.tool';
  } else if (option == 'Test Values') {
    execute  = 'curl -sL -H "Content-Type: application/json" -X POST';
    execute += ' -d \'{ "auth": { "tenantName": "' + project_name + '", "passwordCredentials": { "username": "' + username + '", "password": "' + password + '" } } }\'';
    execute += ' ' + url + 'tokens | python -m json.tool';
  }

  $('#authentication_page .execute').text(execute);
  return false;
});

$('#logging_page .save').click(function() {
  console.log('#logging_page.save');
  $('#explorer_console').show();

  logging = new Object();
  logging['logging'] = $('#logging_page select[name=logging]').val();
  os['logging'] = logging;

  debugging(os);
  show_explorer_page($(this));
  return false;
});

$('#format_page .save').click(function() {
  console.log('#format_page.save');

  format = new Object();
  format['format'] = $('#format_page select[name=format]').val();
  format['prefix'] = $('#format_page input[name=prefix]').val();
  format['long'] = $('#format_page input[name=long]:checked').val();
  os['format'] = format;

  debugging(os);
  show_explorer_page($(this));
  return false;
});

$('.cancel').click(function() {
  console.log('.cancel');
  show_explorer_page($(this));
  return false;
});

$('#explorer_page .run').click(function() {
  console.log('#explorer_page.run');
  $('#msg').hide();
  command = $('#explorer_page select[name=command]').val();
  action = $('#explorer_page select[name=action]').val();
  
  msg='';
  if (command == '') {
    msg = 'You need to specify a command.';
  }
  if (action == '') {
    msg += 'You need to specify an action.';
  }
  if (msg != '') {
    $('#msg-text').text(msg);
    $('#msg').addClass('alert-warning').show();
    return false;
  }

  cli = 'openstack';
  args='';
  // Add the authentication options as --[name]=value 
  for (var key in os.authentication) {
    if (os.authentication[key]) {
      args += " --" + key + "=" + os.authentication[key];
    }
  }

  // Add the logging options as value
  for (var key in os.logging) {
    if (os.logging[key]) {
      args += " " + os.logging[key];
    }
  }

  help = $('#explorer_page input[name=help]:checked').val();
  if (help)
    args += " " + help;

  // Add in the command and action
  if (args) 
    args += " "

  args += command + " " + action;

  // Add the formatting options 
  for (var key in os.format) {
    if (os.format[key]) {
      args += " " + os.format[key];
    }
  }


  options = $('#explorer_page input[name=options]').val();
  if (options)
    args += " " + options;
  
  args = args.trim();

  execute = cli + " " + args;

  $('#execute').text(execute);
  $('#rc').text('');
  $('#stdout').text('');
  $('#stderr').text('');
  $('#explorer_console').show();
  console.log('Executing ' + execute);

  url = 'http://' + window.location.hostname + ':4242/api/cli';
  data = "command=" + cli +  "&args=" + args;
  console.log(url + " " + data);
  $.ajax({
    method: 'POST',
    url:  url,
    data: data, 
    dataType: 'json', // Response
    success: function(data, textStatus, jQxhr){
      if (data && data.error) {
        console.log(data.error);
        $('#msg-text').text(data.error);
        $('#msg').removeClass('alert-warning').removeClass('alert-success').addClass('alert-danger').show();
      }
      else {
        $('#msg-text').text('Successfully ran command.');
        $('#msg').removeClass('alert-warning').removeClass('alert-danger').addClass('alert-success').show().fadeOut(2000);
        $('#rc').text(data.status);
        $('#stdout').text(data.stdout);
        $('#stderr').text(data.stderr);
      }
    },
    error: function(jqXhr, textStatus, errorThrown ){
      $('#msg-text').text('Error executing the command with web API.');
      $('#msg').removeClass('alert-warning').removeClass('alert-success').addClass('alert-danger').show();
      console.log("Error executing API call");
    }
  });

  $('#explorer_response').show();
  return false;
});

// Page Initialization
$(document).ready(function() {
  $('#explorer_page').show();
}); //document.ready

</script>
</html>
